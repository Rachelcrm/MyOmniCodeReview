{
  "patch": "diff --git a/django/db/models/fields/files.py b/django/db/models/fields/files.py\nindex e10a5bb6d9..0ae88bc7ea 100644\n--- a/django/db/models/fields/files.py\n+++ b/django/db/models/fields/files.py\n@@ -19,6 +19,7 @@ class FieldFile(File):\n         self.field = field\n         self.storage = field.storage\n         self._committed = True\n+        self._file = None\n \n     def __eq__(self, other):\n         # Older code may be expecting FileField values to be simple strings.\n@@ -62,7 +63,6 @@ class FieldFile(File):\n         self._require_file()\n         return self.storage.url(self.name)\n \n-    @property\n     def size(self):\n         self._require_file()\n         if not self._committed:\n@@ -294,13 +294,13 @@ class FileField(Field):\n \n     def pre_save(self, model_instance, add):\n         file = super().pre_save(model_instance, add)\n-        if file and not file._committed:\n+        if file and not getattr(file, '_committed', True):\n             # Commit the file to storage prior to saving the model\n             file.save(file.name, file.file, save=False)\n         return file\n \n-    def contribute_to_class(self, cls, name, **kwargs):\n-        super().contribute_to_class(cls, name, **kwargs)\n+    def contribute_to_class(self, cls, name, private_only=False, **kwargs):\n+        super().contribute_to_class(cls, name, private_only=private_only, **kwargs)\n         setattr(cls, self.attname, self.descriptor_class(self))\n \n     def generate_filename(self, instance, filename):\n@@ -327,7 +327,7 @@ class FileField(Field):\n             # database, so leaving False as-is is not acceptable.\n             setattr(instance, self.name, data or '')\n \n-    def formfield(self, **kwargs):\n+    def formfield(self, form_class=None, choices_form_class=None, **kwargs):\n         return super().formfield(**{\n             'form_class': forms.FileField,\n             'max_length': self.max_length,\n@@ -382,7 +382,7 @@ class ImageField(FileField):\n \n     def _check_image_library_installed(self):\n         try:\n-            from PIL import Image  # NOQA\n+            from PIL import Image  # noqa: F401\n         except ImportError:\n             return [\n                 checks.Error(\n@@ -404,16 +404,16 @@ class ImageField(FileField):\n             kwargs['height_field'] = self.height_field\n         return name, path, args, kwargs\n \n-    def contribute_to_class(self, cls, name, **kwargs):\n-        super().contribute_to_class(cls, name, **kwargs)\n+    def contribute_to_class(self, cls, name, private_only=False, **kwargs):\n+        super().contribute_to_class(cls, name, private_only=private_only, **kwargs)\n         # Attach update_dimension_fields so that dimension fields declared\n         # after their corresponding image field don't stay cleared by\n         # Model.__init__, see bug #11196.\n         # Only run post-initialization dimension update on non-abstract models\n-        if not cls._meta.abstract:\n+        if not getattr(cls._meta, 'abstract', False):\n             signals.post_init.connect(self.update_dimension_fields, sender=cls)\n \n-    def update_dimension_fields(self, instance, force=False, *args, **kwargs):\n+    def update_dimension_fields(self, instance, *args, force=False, **kwargs):\n         \"\"\"\n         Update field's width and height fields, if defined.\n \n"
}