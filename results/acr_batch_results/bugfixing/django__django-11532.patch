{
  "patch": "diff --git a/django/core/mail/message.py b/django/core/mail/message.py\nindex e393b4cf5c..7469c88d1d 100644\n--- a/django/core/mail/message.py\n+++ b/django/core/mail/message.py\n@@ -11,6 +11,7 @@ from email.mime.message import MIMEMessage\n from email.mime.multipart import MIMEMultipart\n from email.mime.text import MIMEText\n from email.utils import formatdate, getaddresses, make_msgid\n+from idna import encode as idna_encode\n from io import BytesIO, StringIO\n from pathlib import Path\n \n@@ -257,7 +258,11 @@ class EmailMessage:\n             msg['Date'] = formatdate(localtime=settings.EMAIL_USE_LOCALTIME)\n         if 'message-id' not in header_names:\n             # Use cached DNS_NAME for performance\n-            msg['Message-ID'] = make_msgid(domain=DNS_NAME)\n+            try:\n+               domain = idna_encode(DNS_NAME).decode('ascii')\n+            except idna.IDNAError:\n+               domain = DNS_NAME\n+            msg['Message-ID'] = make_msgid(domain=domain)\n         for name, value in self.extra_headers.items():\n             if name.lower() != 'from':  # From is already handled\n                 msg[name] = value\n"
}