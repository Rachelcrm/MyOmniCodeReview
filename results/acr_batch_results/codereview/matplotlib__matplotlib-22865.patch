{
  "patch": "diff --git a/lib/matplotlib/colorbar.py b/lib/matplotlib/colorbar.py\nindex c59b0ac815..bddabd5f77 100644\n--- a/lib/matplotlib/colorbar.py\n+++ b/lib/matplotlib/colorbar.py\n@@ -595,19 +595,23 @@ class Colorbar:\n         self._short_axis().set_ticks([])\n         self._short_axis().set_ticks([], minor=True)\n \n+        # Compute the X/Y mesh.\n+        X, Y = self._mesh()\n+\n         # Set self._boundaries and self._values, including extensions.\n         # self._boundaries are the edges of each square of color, and\n         # self._values are the value to map into the norm to get the\n         # color:\n         self._process_values()\n-        # Set self.vmin and self.vmax to first and last boundary, excluding\n-        # extensions:\n-        self.vmin, self.vmax = self._boundaries[self._inside][[0, -1]]\n-        # Compute the X/Y mesh.\n-        X, Y = self._mesh()\n+\n         # draw the extend triangles, and shrink the inner axes to accommodate.\n         # also adds the outline path to self.outline spine:\n         self._do_extends()\n+\n+        # Set self.vmin and self.vmax to first and last boundary, excluding\n+        # extensions:\n+        self.vmin, self.vmax = self._boundaries[self._inside][[0, -1]]\n+\n         lower, upper = self.vmin, self.vmax\n         if self._long_axis().get_inverted():\n             # If the axis is inverted, we need to swap the vmin/vmax\n"
}