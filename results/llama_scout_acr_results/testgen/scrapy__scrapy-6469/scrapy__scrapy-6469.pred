{
  "instance_id": "scrapy__scrapy-6469",
  "model": "openrouter/meta-llama/llama-4-scout",
  "response": "```\n<file>tests/test_contracts.py</file>\n<original>\n# Original code here (if modifying existing file)\n</original>\n<patched>\nimport pytest\nfrom scrapy.contracts import Contract\nfrom scrapy.http import Request\n\ndef test_contract_meta():\n    class MyContract(Contract):\n        name = \"my_contract\"\n\n    request = Request(\"https://example.com\")\n    meta = {\"cookiejar\": \"my_cookies\"}\n    request.meta.update(meta)\n\n    contract = MyContract(None)\n    contract.add_pre_hook(request, None)\n\n    assert request.meta[\"cookiejar\"] == \"my_cookies\"\n\ndef test_contract_meta_post_hook():\n    class MyContract(Contract):\n        name = \"my_contract\"\n\n    request = Request(\"https://example.com\")\n    meta = {\"cookiejar\": \"my_cookies\"}\n    request.meta.update(meta)\n\n    contract = MyContract(None)\n    contract.add_post_hook(request, None)\n\n    assert request.meta[\"cookiejar\"] == \"my_cookies\"\n\ndef test_contract_adjust_request_args():\n    class MyContract(Contract):\n        name = \"my_contract\"\n\n    request = Request(\"https://example.com\")\n    args = {\"meta\": {\"cookiejar\": \"my_cookies\"}}\n\n    contract = MyContract(None)\n    adjusted_args = contract.adjust_request_args(args)\n\n    assert adjusted_args[\"meta\"][\"cookiejar\"] == \"my_cookies\"\n</patched>\n```",
  "patch": "--- a/tests/test_contracts.py\n+++ b/tests/test_contracts.py\n-# Original code here (if modifying existing file)\n+import pytest\n+from scrapy.contracts import Contract\n+from scrapy.http import Request\n+\n+def test_contract_meta():\n+    class MyContract(Contract):\n+        name = \"my_contract\"\n+\n+    request = Request(\"https://example.com\")\n+    meta = {\"cookiejar\": \"my_cookies\"}\n+    request.meta.update(meta)\n+\n+    contract = MyContract(None)\n+    contract.add_pre_hook(request, None)\n+\n+    assert request.meta[\"cookiejar\"] == \"my_cookies\"\n+\n+def test_contract_meta_post_hook():\n+    class MyContract(Contract):\n+        name = \"my_contract\"\n+\n+    request = Request(\"https://example.com\")\n+    meta = {\"cookiejar\": \"my_cookies\"}\n+    request.meta.update(meta)\n+\n+    contract = MyContract(None)\n+    contract.add_post_hook(request, None)\n+\n+    assert request.meta[\"cookiejar\"] == \"my_cookies\"\n+\n+def test_contract_adjust_request_args():\n+    class MyContract(Contract):\n+        name = \"my_contract\"\n+\n+    request = Request(\"https://example.com\")\n+    args = {\"meta\": {\"cookiejar\": \"my_cookies\"}}\n+\n+    contract = MyContract(None)\n+    adjusted_args = contract.adjust_request_args(args)\n+\n+    assert adjusted_args[\"meta\"][\"cookiejar\"] == \"my_cookies\"\n"
}