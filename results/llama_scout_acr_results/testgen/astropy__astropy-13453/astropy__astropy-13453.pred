{
  "instance_id": "astropy__astropy-13453",
  "model": "openrouter/meta-llama/llama-4-scout",
  "response": "<file>tests/test_ascii.py</file>\n<original>\n# Original code here\n</original>\n<patched>\nimport pytest\nfrom astropy.table import Table\nfrom astropy.io import ascii\nfrom io import StringIO\n\ndef test_write_html_with_formats():\n    # generate table\n    t = Table([(1.23875234858e-24, 3.2348748432e-15), (2, 4)], names=('a', 'b'))\n\n    # print HTML table with \"a\" column formatted to show 2 decimal places\n    with StringIO() as sp:\n        t.write(sp, format=\"html\", formats={\"a\": lambda x: f\"{x:.2e}\"})\n        result = sp.getvalue()\n\n    assert \"1.24e-24\" in result\n    assert \"3.23e-15\" not in result  # This should not be formatted\n\ndef test_write_html_without_formats():\n    # generate table\n    t = Table([(1.23875234858e-24, 3.2348748432e-15), (2, 4)], names=('a', 'b'))\n\n    # print HTML table without formats\n    with StringIO() as sp:\n        t.write(sp, format=\"html\")\n        result = sp.getvalue()\n\n    assert \"1.23875234858e-24\" in result\n    assert \"3.2348748432e-15\" in result\n\ndef test_write_csv_with_formats():\n    # generate table\n    t = Table([(1.23875234858e-24, 3.2348748432e-15), (2, 4)], names=('a', 'b'))\n\n    # print CSV table with \"a\" column formatted to show 2 decimal places\n    with StringIO() as sp:\n        t.write(sp, format=\"csv\", formats={\"a\": lambda x: f\"{x:.2e}\"})\n        result = sp.getvalue()\n\n    assert \"1.24e-24\" in result\n    assert \"2,4\" in result\n\ndef test_write_rst_with_formats():\n    # generate table\n    t = Table([(1.23875234858e-24, 3.2348748432e-15), (2, 4)], names=('a', 'b'))\n\n    # print rst table with \"a\" column formatted to show 2 decimal places\n    with StringIO() as sp:\n        t.write(sp, format=\"ascii.rst\", formats={\"a\": lambda x: f\"{x:.2e}\"})\n        result = sp.getvalue()\n\n    assert \"1.24e-24\" in result\n    assert \"2           4\" in result\n</patched>\n```",
  "patch": "--- a/tests/test_ascii.py\n+++ b/tests/test_ascii.py\n-# Original code here\n+import pytest\n+from astropy.table import Table\n+from astropy.io import ascii\n+from io import StringIO\n+\n+def test_write_html_with_formats():\n+    # generate table\n+    t = Table([(1.23875234858e-24, 3.2348748432e-15), (2, 4)], names=('a', 'b'))\n+\n+    # print HTML table with \"a\" column formatted to show 2 decimal places\n+    with StringIO() as sp:\n+        t.write(sp, format=\"html\", formats={\"a\": lambda x: f\"{x:.2e}\"})\n+        result = sp.getvalue()\n+\n+    assert \"1.24e-24\" in result\n+    assert \"3.23e-15\" not in result  # This should not be formatted\n+\n+def test_write_html_without_formats():\n+    # generate table\n+    t = Table([(1.23875234858e-24, 3.2348748432e-15), (2, 4)], names=('a', 'b'))\n+\n+    # print HTML table without formats\n+    with StringIO() as sp:\n+        t.write(sp, format=\"html\")\n+        result = sp.getvalue()\n+\n+    assert \"1.23875234858e-24\" in result\n+    assert \"3.2348748432e-15\" in result\n+\n+def test_write_csv_with_formats():\n+    # generate table\n+    t = Table([(1.23875234858e-24, 3.2348748432e-15), (2, 4)], names=('a', 'b'))\n+\n+    # print CSV table with \"a\" column formatted to show 2 decimal places\n+    with StringIO() as sp:\n+        t.write(sp, format=\"csv\", formats={\"a\": lambda x: f\"{x:.2e}\"})\n+        result = sp.getvalue()\n+\n+    assert \"1.24e-24\" in result\n+    assert \"2,4\" in result\n+\n+def test_write_rst_with_formats():\n+    # generate table\n+    t = Table([(1.23875234858e-24, 3.2348748432e-15), (2, 4)], names=('a', 'b'))\n+\n+    # print rst table with \"a\" column formatted to show 2 decimal places\n+    with StringIO() as sp:\n+        t.write(sp, format=\"ascii.rst\", formats={\"a\": lambda x: f\"{x:.2e}\"})\n+        result = sp.getvalue()\n+\n+    assert \"1.24e-24\" in result\n+    assert \"2           4\" in result\n"
}