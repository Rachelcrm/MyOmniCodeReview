{
  "patch": "diff --git a/youtube_dl/utils.py b/youtube_dl/utils.py\nindex 61b94d84c..494cc902f 100644\n--- a/youtube_dl/utils.py\n+++ b/youtube_dl/utils.py\n@@ -1811,7 +1811,7 @@ def preferredencoding():\n     try:\n         pref = locale.getpreferredencoding()\n         'TEST'.encode(pref)\n-    except Exception:\n+    except (locale.Error, TypeError):\n         pref = 'UTF-8'\n \n     return pref\n@@ -1959,9 +1959,9 @@ def xpath_attr(node, xpath, key, name=None, fatal=False, default=NO_DEFAULT):\n     return n.attrib[key]\n \n \n-def get_element_by_id(id, html):\n+def get_element_by_id(element_id, html):\n     \"\"\"Return the content of the tag with the specified ID in the passed HTML document\"\"\"\n-    return get_element_by_attribute('id', id, html)\n+    return get_element_by_attribute('id', element_id, html)\n \n \n def get_element_by_class(class_name, html):\n@@ -2076,7 +2076,7 @@ def sanitize_open(filename, open_mode):\n                 import msvcrt\n                 msvcrt.setmode(sys.stdout.fileno(), os.O_BINARY)\n             return (sys.stdout.buffer if hasattr(sys.stdout, 'buffer') else sys.stdout, filename)\n-        stream = open(encodeFilename(filename), open_mode)\n+        stream = open(encodeFilename(filename), open_mode, encoding=getpreferredencoding())\n         return (stream, filename)\n     except (IOError, OSError) as err:\n         if err.errno in (errno.EACCES,):\n"
}