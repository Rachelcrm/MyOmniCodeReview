{
  "patch": "diff --git a/django/db/backends/base/schema.py b/django/db/backends/base/schema.py\nindex 696bfd7742..5e53b4ec8b 100644\n--- a/django/db/backends/base/schema.py\n+++ b/django/db/backends/base/schema.py\n@@ -35,7 +35,7 @@ def _is_relevant_relation(relation, altered_field):\n \n \n def _all_related_fields(model):\n-    return model._meta._get_fields(\n+    return model._meta.get_fields(\n         forward=False,\n         reverse=True,\n         include_hidden=True,\n@@ -135,12 +135,12 @@ class BaseDatabaseSchemaEditor:\n \n     sql_delete_procedure = \"DROP PROCEDURE %(procedure)s\"\n \n-    def __init__(self, connection, collect_sql=False, atomic=True):\n+    def __init__(self, connection, collect_sql=False, allow_ddl=True):\n         self.connection = connection\n         self.collect_sql = collect_sql\n         if self.collect_sql:\n             self.collected_sql = []\n-        self.atomic_migration = self.connection.features.can_rollback_ddl and atomic\n+        self.atomic_migration = self.connection.features.can_rollback_ddl and allow_ddl\n \n     # State-managing methods\n \n"
}