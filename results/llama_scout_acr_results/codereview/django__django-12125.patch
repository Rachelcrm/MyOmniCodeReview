{
  "patch": "diff --git a/django/db/migrations/serializer.py b/django/db/migrations/serializer.py\nindex 7d226955d5..c4d88f31bc 100644\n--- a/django/db/migrations/serializer.py\n+++ b/django/db/migrations/serializer.py\n@@ -144,6 +144,14 @@ class FunctionTypeSerializer(BaseSerializer):\n             klass = self.value.__self__\n             module = klass.__module__\n             return \"%s.%s.%s\" % (module, klass.__name__, self.value.__name__), {\"import %s\" % module}\n+        elif hasattr(self.value, '__module__') and self.value.__module__ is not None:\n+            module_name = self.value.__module__\n+            return '%s.%s' % (module_name, self.value.__qualname__), {'import %s' % self.value.__module__}\n+        elif hasattr(self.value, \"__self__\") and self.value.__self__ is not None:\n+            # Inner class\n+            module = self.value.__module__\n+            klass = self.value.__self__\n+            return \"%s.%s.%s\" % (module, klass.__name__, self.value.__name__), {\"import %s\" % module}\n         # Further error checking\n         if self.value.__name__ == '<lambda>':\n             raise ValueError(\"Cannot serialize function: lambda\")\n"
}