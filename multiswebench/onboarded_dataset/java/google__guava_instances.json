[
  {
    "repo": "google/guava",
    "pull_number": 6586,
    "instance_id": "google__guava_6586",
    "issue_numbers": [
      3304
    ],
    "base_commit": "01dcc2e6104e9bd0392cb19029edf2c581425b67",
    "patch": "diff --git a/android/guava/src/com/google/common/primitives/Longs.java b/android/guava/src/com/google/common/primitives/Longs.java\nindex 536fdd5fbfa2..ce6a6fa39485 100644\n--- a/android/guava/src/com/google/common/primitives/Longs.java\n+++ b/android/guava/src/com/google/common/primitives/Longs.java\n@@ -244,13 +244,15 @@ public static long constrainToRange(long value, long min, long max) {\n    *\n    * @param arrays zero or more {@code long} arrays\n    * @return a single array containing all the values from the source arrays, in order\n+   * @throws IllegalArgumentException if the total number of elements in {@code arrays} does not fit\n+   *     in an {@code int}\n    */\n   public static long[] concat(long[]... arrays) {\n-    int length = 0;\n+    long length = 0;\n     for (long[] array : arrays) {\n       length += array.length;\n     }\n-    long[] result = new long[length];\n+    long[] result = new long[checkNoOverflow(length)];\n     int pos = 0;\n     for (long[] array : arrays) {\n       System.arraycopy(array, 0, result, pos, array.length);\n@@ -259,6 +261,14 @@ public static long[] concat(long[]... arrays) {\n     return result;\n   }\n \n+  private static int checkNoOverflow(long result) {\n+    checkArgument(\n+        result == (int) result,\n+        \"the total number of elements (%s) in the arrays must fit in an int\",\n+        result);\n+    return (int) result;\n+  }\n+\n   /**\n    * Returns a big-endian representation of {@code value} in an 8-element byte array; equivalent to\n    * {@code ByteBuffer.allocate(8).putLong(value).array()}. For example, the input value {@code\ndiff --git a/guava/src/com/google/common/primitives/Longs.java b/guava/src/com/google/common/primitives/Longs.java\nindex 90ceb4f7c028..8369973cc789 100644\n--- a/guava/src/com/google/common/primitives/Longs.java\n+++ b/guava/src/com/google/common/primitives/Longs.java\n@@ -246,13 +246,15 @@ public static long constrainToRange(long value, long min, long max) {\n    *\n    * @param arrays zero or more {@code long} arrays\n    * @return a single array containing all the values from the source arrays, in order\n+   * @throws IllegalArgumentException if the total number of elements in {@code arrays} does not fit\n+   *     in an {@code int}\n    */\n   public static long[] concat(long[]... arrays) {\n-    int length = 0;\n+    long length = 0;\n     for (long[] array : arrays) {\n       length += array.length;\n     }\n-    long[] result = new long[length];\n+    long[] result = new long[checkNoOverflow(length)];\n     int pos = 0;\n     for (long[] array : arrays) {\n       System.arraycopy(array, 0, result, pos, array.length);\n@@ -261,6 +263,14 @@ public static long[] concat(long[]... arrays) {\n     return result;\n   }\n \n+  private static int checkNoOverflow(long result) {\n+    checkArgument(\n+        result == (int) result,\n+        \"the total number of elements (%s) in the arrays must fit in an int\",\n+        result);\n+    return (int) result;\n+  }\n+\n   /**\n    * Returns a big-endian representation of {@code value} in an 8-element byte array; equivalent to\n    * {@code ByteBuffer.allocate(8).putLong(value).array()}. For example, the input value {@code\n",
    "test_patch": "diff --git a/android/guava-tests/test/com/google/common/primitives/LongsTest.java b/android/guava-tests/test/com/google/common/primitives/LongsTest.java\nindex a911a0370aff..83363c41144c 100644\n--- a/android/guava-tests/test/com/google/common/primitives/LongsTest.java\n+++ b/android/guava-tests/test/com/google/common/primitives/LongsTest.java\n@@ -198,6 +198,37 @@ public void testConcat() {\n         .isEqualTo(new long[] {(long) 1, (long) 2, (long) 3, (long) 4});\n   }\n \n+  @GwtIncompatible // different overflow behavior; could probably be made to work by using ~~\n+  public void testConcat_overflow_negative() {\n+    int dim1 = 1 << 16;\n+    int dim2 = 1 << 15;\n+    assertThat(dim1 * dim2).isLessThan(0);\n+    testConcat_overflow(dim1, dim2);\n+  }\n+\n+  @GwtIncompatible // different overflow behavior; could probably be made to work by using ~~\n+  public void testConcat_overflow_nonNegative() {\n+    int dim1 = 1 << 16;\n+    int dim2 = 1 << 16;\n+    assertThat(dim1 * dim2).isAtLeast(0);\n+    testConcat_overflow(dim1, dim2);\n+  }\n+\n+  private static void testConcat_overflow(int arraysDim1, int arraysDim2) {\n+    assertThat((long) arraysDim1 * arraysDim2).isNotEqualTo((long) (arraysDim1 * arraysDim2));\n+\n+    long[][] arrays = new long[arraysDim1][];\n+    // it's shared to avoid using too much memory in tests\n+    long[] sharedArray = new long[arraysDim2];\n+    Arrays.fill(arrays, sharedArray);\n+\n+    try {\n+      Longs.concat(arrays);\n+      fail();\n+    } catch (IllegalArgumentException expected) {\n+    }\n+  }\n+\n   private static void assertByteArrayEquals(byte[] expected, byte[] actual) {\n     assertWithMessage(\n             \"Expected: \" + Arrays.toString(expected) + \", but got: \" + Arrays.toString(actual))\ndiff --git a/guava-tests/test/com/google/common/primitives/LongsTest.java b/guava-tests/test/com/google/common/primitives/LongsTest.java\nindex a911a0370aff..83363c41144c 100644\n--- a/guava-tests/test/com/google/common/primitives/LongsTest.java\n+++ b/guava-tests/test/com/google/common/primitives/LongsTest.java\n@@ -198,6 +198,37 @@ public void testConcat() {\n         .isEqualTo(new long[] {(long) 1, (long) 2, (long) 3, (long) 4});\n   }\n \n+  @GwtIncompatible // different overflow behavior; could probably be made to work by using ~~\n+  public void testConcat_overflow_negative() {\n+    int dim1 = 1 << 16;\n+    int dim2 = 1 << 15;\n+    assertThat(dim1 * dim2).isLessThan(0);\n+    testConcat_overflow(dim1, dim2);\n+  }\n+\n+  @GwtIncompatible // different overflow behavior; could probably be made to work by using ~~\n+  public void testConcat_overflow_nonNegative() {\n+    int dim1 = 1 << 16;\n+    int dim2 = 1 << 16;\n+    assertThat(dim1 * dim2).isAtLeast(0);\n+    testConcat_overflow(dim1, dim2);\n+  }\n+\n+  private static void testConcat_overflow(int arraysDim1, int arraysDim2) {\n+    assertThat((long) arraysDim1 * arraysDim2).isNotEqualTo((long) (arraysDim1 * arraysDim2));\n+\n+    long[][] arrays = new long[arraysDim1][];\n+    // it's shared to avoid using too much memory in tests\n+    long[] sharedArray = new long[arraysDim2];\n+    Arrays.fill(arrays, sharedArray);\n+\n+    try {\n+      Longs.concat(arrays);\n+      fail();\n+    } catch (IllegalArgumentException expected) {\n+    }\n+  }\n+\n   private static void assertByteArrayEquals(byte[] expected, byte[] actual) {\n     assertWithMessage(\n             \"Expected: \" + Arrays.toString(expected) + \", but got: \" + Arrays.toString(actual))\n",
    "problem_statement": "Unhandled overflow in the `concat()` method of per-type primitive utility classes\nThe `concat()` method in the per-type primitive utility classes throws unexpected `NegativeArraySizeException` or `ArrayIndexOutOfBoundsException` if the input arrays contain too many elements.\r\n\r\nAdded test cases to demonstrate both overflow cases. A possible fix is provided.\r\n\r\nIn this commit, only the module `guava` and only the utility class `Longs` are covered along with the unit tests.\r\n\r\nSee https://github.com/google/guava/issues/3303",
    "hints_text": "Changed `Longs.concat()` to throw `IllegalArgumentException` if the input arrays contain too many elements.\nChanged `Longs.concat()` to throw `IllegalArgumentException` if the input arrays contain too many elements.\n\nSee https://github.com/google/guava/issues/3303\n\nFixes #3304\n\nRELNOTES=n/a\n",
    "created_at": "",
    "version": "",
    "PASS_TO_PASS": [
      "com.google.common.collect.ForMapMultimapAsMapImplementsMapTest",
      "com.google.common.collect.IterablesTest",
      "com.google.common.collect.TreeMultimapNaturalTest",
      "com.google.common.collect.MutableClassToInstanceMapTest",
      "com.google.common.base.MoreObjectsTest",
      "com.google.common.collect.MapsCollectionTest",
      "com.google.common.collect.ImmutableSetMultimapTest",
      "com.google.common.primitives.DoublesTest",
      "com.google.common.util.concurrent.AbstractScheduledServiceTest",
      "com.google.common.io.CloserTest",
      "com.google.common.io.CharSourceTest",
      "com.google.common.io.BaseEncodingTest",
      "com.google.common.escape.ArrayBasedUnicodeEscaperTest",
      "com.google.common.collect.ArrayTableRowMapTest",
      "com.google.common.collect.TablesTransformValuesRowMapTest",
      "com.google.common.escape.ArrayBasedCharEscaperTest",
      "com.google.common.io.MoreFilesFileTraverserTest",
      "com.google.common.collect.ForwardingSortedSetMultimapTest",
      "com.google.common.util.concurrent.ForwardingListenableFutureTest",
      "com.google.common.util.concurrent.FutureCallbackTest",
      "com.google.common.eventbus.ReentrantEventsTest",
      "com.google.common.collect.SingletonImmutableMapWithUnhashableValueMapInterfaceTest",
      "com.google.common.base.ToStringHelperTest",
      "com.google.common.cache.ForwardingLoadingCacheTest",
      "com.google.common.collect.RangeTest",
      "com.google.common.collect.ImmutableMultisetFloodingTest",
      "com.google.common.collect.TreeBasedTableRowMapTest",
      "com.google.common.collect.ForwardingSortedMapTest",
      "com.google.common.base.DefaultsTest",
      "com.google.common.hash.AbstractByteHasherTest",
      "com.google.common.collect.MapsTest",
      "com.google.common.collect.MultisetsCollectionTest",
      "com.google.common.collect.MultimapsCollectionTest",
      "com.google.common.primitives.UnsignedIntegerTest",
      "com.google.common.collect.FilteredMapTest",
      "com.google.common.math.DoubleUtilsTest",
      "com.google.common.primitives.UnsignedLongsTest",
      "com.google.common.escape.ArrayBasedEscaperMapTest",
      "com.google.common.util.concurrent.GeneratedMonitorTest",
      "com.google.common.collect.ImmutableSortedSetTest",
      "com.google.common.collect.SubMapMultimapAsMapImplementsMapTest",
      "com.google.common.collect.TreeBasedTableRowMapInterfaceTest",
      "com.google.common.collect.DiscreteDomainTest",
      "com.google.common.collect.ContiguousSetTest$BuiltTests",
      "com.google.common.collect.MapsTransformValuesUnmodifiableIteratorTest",
      "com.google.common.primitives.ImmutableLongArrayTest",
      "com.google.common.collect.ConcurrentHashMultisetBasherTest",
      "com.google.common.collect.ImmutableSortedMapHeadMapMapInterfaceTest",
      "com.google.common.collect.TablesTransposeRowTest",
      "com.google.common.util.concurrent.WrappingExecutorServiceTest",
      "com.google.common.collect.EmptyImmutableTableTest",
      "com.google.common.collect.ConcurrentHashMultisetTest",
      "com.google.common.graph.ImmutableNetworkTest",
      "com.google.common.graph.ImmutableValueGraphTest",
      "com.google.common.hash.SipHashFunctionTest",
      "com.google.common.net.MediaTypeTest",
      "com.google.common.collect.ArrayTableTest",
      "com.google.common.collect.SetOperationsTest",
      "com.google.common.collect.Collections2FilterArrayListTest",
      "com.google.common.testing.ClassSanityTesterTest",
      "com.google.common.util.concurrent.RunnablesTest",
      "com.google.common.cache.LongAdderTest",
      "com.google.common.hash.Murmur3Hash32Test",
      "com.google.common.util.concurrent.ListenerCallQueueTest",
      "com.google.common.collect.UnmodifiableRowSortedTableRowTest",
      "com.google.common.collect.CompactHashSetTest",
      "com.google.common.testing.GcFinalizationTest",
      "com.google.common.collect.ArrayTableRowTest",
      "com.google.common.collect.ImmutableSetTest",
      "com.google.common.collect.RegularImmutableTableTest",
      "com.google.common.graph.NetworkMutationTest",
      "com.google.common.io.ByteSourceTest",
      "com.google.common.collect.TopKSelectorTest",
      "com.google.common.reflect.TypeTokenResolutionTest",
      "com.google.common.collect.MapMakerTest",
      "com.google.common.collect.SynchronizedTableTest",
      "com.google.common.collect.CompactHashMapTest",
      "com.google.common.graph.StandardImmutableDirectedGraphTest",
      "com.google.common.io.CountingInputStreamTest",
      "com.google.common.base.StopwatchTest",
      "com.google.common.collect.testing.OpenJdk6QueueTests",
      "com.google.common.collect.HashBasedTableColumnMapTest",
      "com.google.common.io.ByteStreamsTest",
      "com.google.common.util.concurrent.AtomicsTest",
      "com.google.common.util.concurrent.ForwardingExecutorServiceTest",
      "com.google.common.util.concurrent.FuturesTransformAsyncTest",
      "com.google.common.graph.StandardMutableUndirectedGraphTest",
      "com.google.common.io.CountingOutputStreamTest",
      "com.google.common.collect.testing.SafeTreeSetTest",
      "com.google.common.util.concurrent.InterruptibleMonitorTest",
      "com.google.common.base.EnumsTest",
      "com.google.common.base.AbstractIteratorTest",
      "com.google.common.primitives.FloatArrayAsListTest",
      "com.google.common.util.concurrent.FuturesGetCheckedTest",
      "com.google.common.collect.LinkedHashMultisetTest",
      "com.google.common.math.BigIntegerMathTest",
      "com.google.common.collect.ImmutableListCopyOfConcurrentlyModifiedInputTest",
      "com.google.common.math.QuantilesTest",
      "com.google.common.collect.SortedIterablesTest",
      "com.google.common.collect.ForwardingMapTest",
      "com.google.common.reflect.TypeResolverTest",
      "com.google.common.io.ResourcesTest",
      "com.google.common.math.LongMathTest",
      "com.google.common.util.concurrent.UntrustedInputFutureTest",
      "com.google.common.collect.FilteredSortedMapTest",
      "com.google.common.util.concurrent.FakeTimeLimiterTest",
      "com.google.common.testing.EquivalenceTesterTest",
      "com.google.common.hash.BloomFilterTest",
      "com.google.common.net.InetAddressesTest",
      "com.google.common.collect.MapsTransformValuesTest",
      "com.google.common.collect.MinMaxPriorityQueueTest",
      "com.google.common.collect.TreeRangeMapTest",
      "com.google.common.collect.ForwardingTableTest",
      "com.google.common.collect.TablesTransformValuesTest",
      "com.google.common.util.concurrent.ForwardingBlockingQueueTest",
      "com.google.common.util.concurrent.JdkFutureAdaptersTest",
      "com.google.common.collect.UnmodifiableRowSortedTableColumnMapTest",
      "com.google.common.collect.UnmodifiableTableColumnTest",
      "com.google.common.graph.EndpointPairTest",
      "com.google.common.cache.CacheReferencesTest",
      "com.google.common.util.concurrent.ExecutionSequencerTest",
      "com.google.common.cache.CacheEvictionTest",
      "com.google.common.util.concurrent.SupplementalMonitorTest",
      "com.google.common.reflect.InvokableTest",
      "com.google.common.primitives.UnsignedBytesTest",
      "com.google.common.collect.QueuesTest",
      "com.google.common.base.SuppliersTest",
      "com.google.common.eventbus.outside.BaseSubscriberFinderTest",
      "com.google.common.util.concurrent.InterruptibleTaskTest",
      "com.google.common.collect.SynchronizedNavigableMapTest",
      "com.google.common.io.CharSequenceReaderTest",
      "com.google.common.util.concurrent.testing.TestingExecutorsTest",
      "com.google.common.collect.HashMultimapTest",
      "com.google.common.collect.SingletonImmutableTableTest",
      "com.google.common.collect.HashBasedTableRowMapTest",
      "com.google.common.collect.ImmutableRangeMapTest",
      "com.google.common.collect.TableCollectionTest",
      "com.google.common.reflect.ClassPathTest",
      "com.google.common.reflect.ImmutableTypeToInstanceMapTest",
      "com.google.common.collect.CompactLinkedHashSetTest",
      "com.google.common.collect.MultimapsTransformValuesAsMapTest",
      "com.google.common.collect.ForwardingObjectTest",
      "com.google.common.collect.Collections2Test",
      "com.google.common.hash.FunnelsTest",
      "com.google.common.testing.TestLogHandlerTest",
      "com.google.common.collect.SetsFilterHashSetTest",
      "com.google.common.cache.PopulatedCachesTest",
      "com.google.common.testing.ArbitraryInstancesTest",
      "com.google.common.collect.testing.SafeTreeMapTest",
      "com.google.common.cache.CacheExpirationTest",
      "com.google.common.hash.HashingTest",
      "com.google.common.util.concurrent.AbstractListeningExecutorServiceTest",
      "com.google.common.collect.LinkedHashMultimapTest",
      "com.google.common.collect.ReserializedImmutableSortedMapMapInterfaceTest",
      "com.google.common.cache.LocalCacheMapComputeTest",
      "com.google.common.collect.ListsImplTest",
      "com.google.common.collect.ForwardingCollectionTest",
      "com.google.common.collect.ImmutableClassToInstanceMapTest",
      "com.google.common.collect.CountTest",
      "com.google.common.graph.GraphMutationTest",
      "com.google.common.collect.FluentIterableTest",
      "com.google.common.primitives.UnsignedLongTest",
      "com.google.common.collect.LinkedListMultimapTest",
      "com.google.common.graph.StandardImmutableUndirectedGraphTest",
      "com.google.common.collect.ForwardingQueueTest",
      "com.google.common.primitives.FloatsTest",
      "com.google.common.collect.TablesTransformValuesColumnMapTest",
      "com.google.common.graph.GraphEquivalenceTest",
      "com.google.common.collect.IteratorsTest",
      "com.google.common.collect.ForwardingSortedMapImplementsMapTest",
      "com.google.common.io.FilesCreateTempDirTest",
      "com.google.common.collect.CompactLinkedHashMapFloodingTest",
      "com.google.common.base.OptionalTest",
      "com.google.common.io.CharSinkTest",
      "com.google.common.primitives.CharArrayAsListTest",
      "com.google.common.testing.TearDownStackTest",
      "com.google.common.cache.CacheLoadingTest",
      "com.google.common.collect.ForwardingListMultimapTest",
      "com.google.common.cache.EmptyCachesTest",
      "com.google.common.collect.AbstractMapEntryTest",
      "com.google.common.escape.CharEscaperBuilderTest",
      "com.google.common.base.FunctionsTest",
      "com.google.common.reflect.TypesTest",
      "com.google.common.math.MathPreconditionsTest",
      "com.google.common.hash.AbstractNonStreamingHashFunctionTest",
      "com.google.common.io.FilesFileTraverserTest",
      "com.google.common.collect.InternersTest",
      "com.google.common.cache.LocalCacheTest",
      "com.google.common.escape.UnicodeEscaperTest",
      "com.google.common.reflect.ReflectionTest",
      "com.google.common.net.PercentEscaperTest",
      "com.google.common.util.concurrent.AggregateFutureStateFallbackAtomicHelperTest",
      "com.google.common.math.DoubleMathTest",
      "com.google.common.util.concurrent.ThreadFactoryBuilderTest",
      "com.google.common.util.concurrent.ForwardingFutureTest",
      "com.google.common.cache.CacheBuilderSpecTest",
      "com.google.common.collect.CompactLinkedHashMapTest",
      "com.google.common.reflect.ParameterTest",
      "com.google.common.io.CharStreamsTest",
      "com.google.common.collect.FauxveridesTest",
      "com.google.common.primitives.BooleansTest",
      "com.google.common.collect.ImmutableRangeSetTest",
      "com.google.common.collect.SimpleAbstractMultisetTest",
      "com.google.common.collect.UnmodifiableTableRowMapTest",
      "com.google.common.graph.ValueGraphTest",
      "com.google.common.util.concurrent.SimpleTimeLimiterTest",
      "com.google.common.hash.HashingInputStreamTest",
      "com.google.common.cache.CacheBuilderGwtTest",
      "com.google.common.collect.ForwardingNavigableMapTest",
      "com.google.common.collect.testing.MinimalSetTest",
      "com.google.common.util.concurrent.AtomicLongMapBasherTest",
      "com.google.common.testing.RelationshipTesterTest",
      "com.google.common.collect.UnmodifiableIteratorTest",
      "com.google.common.util.concurrent.RateLimiterTest",
      "com.google.common.collect.testing.OpenJdk6SetTests",
      "com.google.common.collect.HashingTest",
      "com.google.common.collect.TreeBasedTableColumnTest",
      "com.google.common.hash.MessageDigestHashFunctionTest",
      "com.google.common.collect.ImmutableMapFloodingTest",
      "com.google.common.cache.AbstractLoadingCacheTest",
      "com.google.common.collect.TreeBasedTableColumnMapTest",
      "com.google.common.base.StandardSystemPropertyTest",
      "com.google.common.reflect.AbstractInvocationHandlerTest",
      "com.google.common.collect.ComparisonChainTest",
      "com.google.common.base.ThrowablesTest",
      "com.google.common.testing.anotherpackage.ForwardingWrapperTesterTest",
      "com.google.common.collect.ForwardingSetMultimapTest",
      "com.google.common.collect.SynchronizedMapTest",
      "com.google.common.collect.StreamsTest",
      "com.google.common.html.HtmlEscapersTest",
      "com.google.common.primitives.UnsignedIntsTest",
      "com.google.common.collect.CompactHashSetFloodingTest",
      "com.google.common.util.concurrent.ServiceTest",
      "com.google.common.graph.NetworkEquivalenceTest",
      "com.google.common.hash.Murmur3Hash128Test",
      "com.google.common.util.concurrent.AbstractFutureTest",
      "com.google.common.collect.ImmutableMultisetTest",
      "com.google.common.base.StringsTest",
      "com.google.common.collect.ForwardingSetTest",
      "com.google.common.hash.Fingerprint2011Test",
      "com.google.common.util.concurrent.UninterruptiblesTest",
      "com.google.common.collect.ImmutableBiMapTest",
      "com.google.common.eventbus.AsyncEventBusTest",
      "com.google.common.collect.ArrayTableColumnTest",
      "com.google.common.eventbus.outside.OutsideEventBusTest",
      "com.google.common.math.PairedStatsTest",
      "com.google.common.collect.ContiguousSetTest",
      "com.google.common.collect.ForwardingMultimapTest",
      "com.google.common.net.HostSpecifierTest",
      "com.google.common.util.concurrent.CallablesTest",
      "com.google.common.graph.StandardMutableDirectedNetworkTest",
      "com.google.common.util.concurrent.AtomicDoubleTest",
      "com.google.common.collect.testing.MapTestSuiteBuilderTests",
      "com.google.common.util.concurrent.ForwardingListeningExecutorServiceTest",
      "com.google.common.collect.ForwardingListTest",
      "com.google.common.math.StatsAccumulatorTest",
      "com.google.common.collect.testing.OpenJdk6Tests",
      "com.google.common.collect.NewCustomTableTest",
      "com.google.common.io.FileBackedOutputStreamTest",
      "com.google.common.collect.ImmutableSortedMultisetTest",
      "com.google.common.collect.UnmodifiableMultimapAsMapImplementsMapTest",
      "com.google.common.eventbus.SubscriberTest",
      "com.google.common.io.FileBackedOutputStreamAndroidIncompatibleTest",
      "com.google.common.collect.TreeMultimapExplicitTest",
      "com.google.common.collect.ForwardingSortedMultisetTest",
      "com.google.common.collect.CollectSpliteratorsTest",
      "com.google.common.util.concurrent.AtomicLongMapTest",
      "com.google.common.collect.ImmutableBiMapMapInterfaceTest",
      "com.google.common.util.concurrent.FuturesGetUncheckedTest",
      "com.google.common.collect.SynchronizedBiMapTest",
      "com.google.common.collect.TreeMultisetTest",
      "com.google.common.math.BigDecimalMathTest",
      "com.google.common.collect.RegularImmutableSortedMapMapInterfaceTest",
      "com.google.common.collect.ImmutableSortedMapTailMapMapInterfaceTest",
      "com.google.common.math.IntMathTest",
      "com.google.common.collect.ImmutableSortedMapTailMapExclusiveMapInterfaceTest",
      "com.google.common.collect.TreeBasedTableRowMapTailMapTest",
      "com.google.common.collect.testing.OpenJdk6ListTests",
      "com.google.common.collect.UnmodifiableRowSortedTableRowMapTest",
      "com.google.common.reflect.TypeTokenSubtypeTest",
      "com.google.common.cache.ForwardingCacheTest",
      "com.google.common.collect.SetsFilterNavigableSetTest",
      "com.google.common.primitives.PrimitivesTest",
      "com.google.common.util.concurrent.AbstractFutureCancellationCauseTest",
      "com.google.common.graph.DefaultNetworkImplementationsTest",
      "com.google.common.base.ObjectsTest",
      "com.google.common.io.PatternFilenameFilterTest",
      "com.google.common.collect.TreeRangeSetTest",
      "com.google.common.escape.EscapersTest",
      "com.google.common.collect.HashBasedTableTest",
      "com.google.common.base.VerifyTest",
      "com.google.common.collect.RangeNonGwtTest",
      "com.google.common.io.LineBufferTest",
      "com.google.common.util.concurrent.WrappingScheduledExecutorServiceTest",
      "com.google.common.util.concurrent.CycleDetectingLockFactoryTest",
      "com.google.common.collect.SynchronizedQueueTest",
      "com.google.common.collect.IterablesFilterArrayListTest",
      "com.google.common.eventbus.outside.NeitherAbstractNorAnnotatedInSuperclassTest",
      "com.google.common.eventbus.SubscriberRegistryTest",
      "com.google.common.cache.NullCacheTest",
      "com.google.common.net.HostAndPortTest",
      "com.google.common.util.concurrent.ExecutionListTest",
      "com.google.common.util.concurrent.ListeningExecutorServiceTest",
      "com.google.common.collect.testing.MinimalCollectionTest",
      "com.google.common.collect.SynchronizedMultimapTest",
      "com.google.common.util.concurrent.MoreExecutorsTest",
      "com.google.common.collect.ForwardingListIteratorTest",
      "com.google.common.collect.CompactHashMapFloodingTest",
      "com.google.common.collect.RegularImmutableMapMapInterfaceTest",
      "com.google.common.util.concurrent.AbstractServiceTest",
      "com.google.common.io.FlushablesTest",
      "com.google.common.testing.NullPointerTesterTest",
      "com.google.common.collect.FilteredMultimapTest",
      "com.google.common.util.concurrent.FuturesTransformTest",
      "com.google.common.collect.ImmutableMultimapAsMapImplementsMapTest",
      "com.google.common.hash.FarmHashFingerprint64Test",
      "com.google.common.util.concurrent.AtomicDoubleArrayTest",
      "com.google.common.collect.ImmutableSortedMapHeadMapInclusiveMapInterfaceTest",
      "com.google.common.util.concurrent.ListenableFutureTaskTest",
      "com.google.common.testing.FakeTickerTest",
      "com.google.common.eventbus.outside.DeepInterfaceTest",
      "com.google.common.util.concurrent.UninterruptibleFutureTest",
      "com.google.common.primitives.IntsTest",
      "com.google.common.reflect.TypeParameterTest",
      "com.google.common.graph.StandardMutableUndirectedNetworkTest",
      "com.google.common.graph.StandardImmutableGraphAdditionalTest",
      "com.google.common.base.FinalizableReferenceQueueTest",
      "com.google.common.base.CaseFormatTest",
      "com.google.common.collect.ImmutableBiMapFloodingTest",
      "com.google.common.collect.ImmutableCollectionTest",
      "com.google.common.collect.testing.ReserializedSafeTreeMapMapInterfaceTest",
      "com.google.common.collect.UnmodifiableTableRowTest",
      "com.google.common.collect.TreeBasedTableRowMapSubMapTest",
      "com.google.common.base.ConverterTest",
      "com.google.common.primitives.BytesTest",
      "com.google.common.util.concurrent.AbstractFutureInnocuousThreadTest",
      "com.google.common.base.EquivalenceTest",
      "com.google.common.collect.EvictingQueueTest",
      "com.google.common.collect.testing.HelpersTest",
      "com.google.common.net.UrlEscapersTest",
      "com.google.common.collect.HashBasedTableColumnTest",
      "com.google.common.collect.ImmutableSetFloodingTest",
      "com.google.common.collect.MoreCollectorsTest",
      "com.google.common.testing.EqualsTesterTest",
      "com.google.common.collect.ImmutableMapTest",
      "com.google.common.util.concurrent.AbstractExecutionThreadServiceTest",
      "com.google.common.collect.TransposedTableTest",
      "com.google.common.io.FilesSimplifyPathTest",
      "com.google.common.cache.LocalLoadingCacheTest",
      "com.google.common.collect.ListsTest",
      "com.google.common.collect.SetsFilterSortedSetTest",
      "com.google.common.graph.GraphPropertiesTest",
      "com.google.common.base.Utf8Test",
      "com.google.common.collect.ImmutableEnumMapTest",
      "com.google.common.util.concurrent.AbstractIdleServiceTest",
      "com.google.common.hash.Crc32cHashFunctionTest",
      "com.google.common.primitives.ShortsTest",
      "com.google.common.util.concurrent.FluentFutureTest",
      "com.google.common.util.concurrent.SettableFutureTest",
      "com.google.common.util.concurrent.AbstractFutureFallbackAtomicHelperTest",
      "com.google.common.collect.MultimapsTest",
      "com.google.common.collect.FilteredBiMapTest",
      "com.google.common.primitives.ShortArrayAsListTest",
      "com.google.common.collect.TreeBasedTableTest",
      "com.google.common.collect.MapsSortedTransformValuesTest",
      "com.google.common.net.HttpHeadersTest",
      "com.google.common.collect.ImmutableListMultimapTest",
      "com.google.common.collect.SingletonImmutableMapMapInterfaceTest",
      "com.google.common.math.PairedStatsAccumulatorTest",
      "com.google.common.collect.ForwardingConcurrentMapTest",
      "com.google.common.collect.HashMultisetTest",
      "com.google.common.graph.GraphsTest",
      "com.google.common.base.JoinerTest",
      "com.google.common.collect.testing.features.FeatureEnumTest",
      "com.google.common.collect.ImmutableSetMultimapAsMapImplementsMapTest",
      "com.google.common.base.AsciiTest",
      "com.google.common.io.LittleEndianDataInputStreamTest",
      "com.google.common.math.QuantilesAlgorithmTest",
      "com.google.common.util.concurrent.FuturesTest",
      "com.google.common.primitives.ImmutableDoubleArrayTest",
      "com.google.common.collect.EnumMultisetTest",
      "com.google.common.hash.MacHashFunctionTest",
      "com.google.common.collect.ReserializedImmutableMapMapInterfaceTest",
      "com.google.common.util.concurrent.TrustedInputFutureTest",
      "com.google.common.collect.TablesTransformValuesColumnTest",
      "com.google.common.collect.SynchronizedDequeTest",
      "com.google.common.collect.UnmodifiableTableColumnMapTest",
      "com.google.common.graph.StandardMutableDirectedGraphTest",
      "com.google.common.collect.ComparatorsTest",
      "com.google.common.primitives.LongArrayAsListTest",
      "com.google.common.collect.ImmutableMapWithBadHashesMapInterfaceTest",
      "com.google.common.collect.ForwardingNavigableSetTest",
      "com.google.common.collect.MapMakerInternalMapTest",
      "com.google.common.base.PredicatesTest",
      "com.google.common.collect.ArrayListMultimapTest",
      "com.google.common.collect.UnmodifiableRowSortedTableColumnTest",
      "com.google.common.collect.testing.features.FeatureUtilTest",
      "com.google.common.reflect.TypeVisitorTest",
      "com.google.common.io.CloseablesTest",
      "com.google.common.collect.ImmutableBiMapInverseMapInterfaceTest",
      "com.google.common.collect.ForwardingMultisetTest",
      "com.google.common.hash.HashCodeTest",
      "com.google.common.collect.GeneralRangeTest",
      "com.google.common.graph.ElementOrderTest",
      "com.google.common.xml.XmlEscapersTest",
      "com.google.common.collect.SynchronizedSetTest",
      "com.google.common.collect.MultimapBuilderTest",
      "com.google.common.reflect.TypeTokenTest",
      "com.google.common.collect.UnmodifiableListIteratorTest",
      "com.google.common.eventbus.EventBusTest",
      "com.google.common.collect.testing.IteratorTesterTest",
      "com.google.common.collect.testing.MinimalIterableTest",
      "com.google.common.collect.TablesTransposeColumnTest",
      "com.google.common.collect.ImmutableSortedMapTest",
      "com.google.common.primitives.ImmutableIntArrayTest",
      "com.google.common.io.MultiInputStreamTest",
      "com.google.common.collect.SortedListsTest",
      "com.google.common.collect.TablesTest",
      "com.google.common.util.concurrent.ClosingFutureFinishToFutureTest",
      "com.google.common.util.concurrent.TrustedListenableFutureTaskTest",
      "com.google.common.hash.AbstractStreamingHasherTest",
      "com.google.common.io.AppendableWriterTest",
      "com.google.common.collect.testing.OpenJdk6MapTests",
      "com.google.common.collect.EnumHashBiMapTest",
      "com.google.common.collect.ImmutableTableTest",
      "com.google.common.primitives.ByteArrayAsListTest",
      "com.google.common.collect.CompactLinkedHashSetFloodingTest",
      "com.google.common.collect.SingletonImmutableSortedMapMapInterfaceTest",
      "com.google.common.graph.StandardImmutableDirectedNetworkTest",
      "com.google.common.collect.TreeTraverserTest",
      "com.google.common.collect.SetsTest",
      "com.google.common.collect.MultisetsImmutableEntryTest",
      "com.google.common.cache.CacheRefreshTest",
      "com.google.common.eventbus.outside.AbstractNotAnnotatedInSuperclassTest",
      "com.google.common.collect.SynchronizedNavigableSetTest",
      "com.google.common.collect.AbstractBiMapTest",
      "com.google.common.util.concurrent.ClosingFutureFinishToValueAndCloserTest",
      "com.google.common.util.concurrent.ListeningScheduledExecutorServiceTest",
      "com.google.common.cache.RemovalNotificationTest",
      "com.google.common.primitives.DoubleArrayAsListTest",
      "com.google.common.eventbus.outside.AnnotatedNotAbstractInSuperclassTest",
      "com.google.common.collect.ArrayTableColumnMapTest",
      "com.google.common.base.StopwatchJavaTimeTest",
      "com.google.common.base.CharsetsTest",
      "com.google.common.base.CharMatcherTest",
      "com.google.common.testing.FreshValueGeneratorTest",
      "com.google.common.util.concurrent.ServiceManagerTest",
      "com.google.common.eventbus.DispatcherTest",
      "com.google.common.collect.ObjectArraysTest",
      "com.google.common.cache.CacheBuilderTest",
      "com.google.common.collect.testing.FeatureSpecificTestSuiteBuilderTest",
      "com.google.common.collect.AbstractIteratorTest",
      "com.google.common.util.concurrent.FuturesGetDoneTest",
      "com.google.common.collect.ImmutableListTest",
      "com.google.common.util.concurrent.SequentialExecutorTest",
      "com.google.common.hash.ChecksumHashFunctionTest",
      "com.google.common.cache.CacheLoaderTest",
      "com.google.common.collect.TablesTransformValuesRowTest",
      "com.google.common.collect.TableCollectorsTest",
      "com.google.common.io.FilesTest",
      "com.google.common.primitives.CharsTest",
      "com.google.common.io.ByteSinkTest",
      "com.google.common.util.concurrent.UninterruptibleMonitorTest",
      "com.google.common.hash.HashingOutputStreamTest",
      "com.google.common.testing.SerializableTesterTest",
      "com.google.common.graph.MapCacheTest",
      "com.google.common.base.FinalizableReferenceQueueClassLoaderUnloadingTest",
      "com.google.common.primitives.SignedBytesTest",
      "com.google.common.util.concurrent.ListenableFutureTest",
      "com.google.common.cache.CacheManualTest",
      "com.google.common.collect.EnumBiMapTest",
      "com.google.common.io.MultiReaderTest",
      "com.google.common.collect.TreeBasedTableRowTest",
      "com.google.common.util.concurrent.ForwardingBlockingDequeTest",
      "com.google.common.reflect.MutableTypeToInstanceMapTest",
      "com.google.common.net.InternetDomainNameTest",
      "com.google.common.collect.ForwardingDequeTest",
      "com.google.common.collect.HashBiMapTest",
      "com.google.common.cache.AbstractCacheTest",
      "com.google.common.collect.HashBasedTableRowTest",
      "com.google.common.collect.MultimapsFilterEntriesAsMapTest",
      "com.google.common.collect.TreeBasedTableRowMapHeadMapTest",
      "com.google.common.math.LinearTransformationTest",
      "com.google.common.util.concurrent.ForwardingObjectTesterTest",
      "com.google.common.base.SplitterTest",
      "com.google.common.collect.ForwardingSortedSetTest",
      "com.google.common.collect.AbstractSequentialIteratorTest",
      "com.google.common.collect.RegularImmutableMapWithUnhashableValuesMapInterfaceTest",
      "com.google.common.math.StatsTest",
      "com.google.common.collect.MultisetsTest",
      "com.google.common.graph.TraverserTest",
      "com.google.common.io.LittleEndianDataOutputStreamTest",
      "com.google.common.base.PreconditionsTest",
      "com.google.common.collect.OrderingTest",
      "com.google.common.eventbus.outside.AnnotatedAndAbstractInSuperclassTest",
      "com.google.common.collect.ImmutableMultimapTest",
      "com.google.common.collect.ImmutableSortedMapSubMapMapInterfaceTest",
      "com.google.common.collect.RegularImmutableAsListTest",
      "com.google.common.util.concurrent.StripedTest",
      "com.google.common.collect.PeekingIteratorTest",
      "com.google.common.primitives.IntArrayAsListTest",
      "com.google.common.cache.CacheStatsTest",
      "com.google.common.util.concurrent.UncaughtExceptionHandlersTest"
    ],
    "FAIL_TO_PASS": [
      "com.google.common.primitives.LongsTest"
    ],
    "bad_patches": []
  },
  {
    "repo": "google/guava",
    "pull_number": 2945,
    "instance_id": "google__guava_2945",
    "issue_numbers": [
      2914
    ],
    "base_commit": "27b0d3840b057814b403fa8b194bad5914b166a4",
    "patch": "diff --git a/android/guava/pom.xml b/android/guava/pom.xml\nindex d7b418c83deb..4d6a8a0d9af4 100644\n--- a/android/guava/pom.xml\n+++ b/android/guava/pom.xml\n@@ -5,7 +5,7 @@\n   <parent>\n     <groupId>com.google.guava</groupId>\n     <artifactId>guava-parent</artifactId>\n-    <version>24.0-android-SNAPSHOT</version>\n+    <version>24.0-ga-SNAPSHOT</version>\n   </parent>\n   <artifactId>guava</artifactId>\n   <packaging>bundle</packaging>\ndiff --git a/android/pom.xml b/android/pom.xml\nindex 6cd11617a28a..563af84a86b4 100644\n--- a/android/pom.xml\n+++ b/android/pom.xml\n@@ -11,7 +11,7 @@\n   </parent>\n   <groupId>com.google.guava</groupId>\n   <artifactId>guava-parent</artifactId>\n-  <version>24.0-android-SNAPSHOT</version>\n+  <version>24.0-ga-SNAPSHOT</version>\n   <packaging>pom</packaging>\n   <name>Guava Maven Parent</name>\n   <url>https://github.com/google/guava</url>\ndiff --git a/guava-gwt/pom.xml b/guava-gwt/pom.xml\nindex 1ce01acb14cc..49047f529fc5 100644\n--- a/guava-gwt/pom.xml\n+++ b/guava-gwt/pom.xml\n@@ -5,7 +5,7 @@\n   <parent>\n     <groupId>com.google.guava</groupId>\n     <artifactId>guava-parent</artifactId>\n-    <version>24.0-jre-SNAPSHOT</version>\n+    <version>24.0-SNAPSHOT</version>\n   </parent>\n   <artifactId>guava-gwt</artifactId>\n   <name>Guava GWT compatible libs</name>\ndiff --git a/guava/pom.xml b/guava/pom.xml\nindex 10a549536681..3beba01b8562 100644\n--- a/guava/pom.xml\n+++ b/guava/pom.xml\n@@ -5,7 +5,7 @@\n   <parent>\n     <groupId>com.google.guava</groupId>\n     <artifactId>guava-parent</artifactId>\n-    <version>24.0-jre-SNAPSHOT</version>\n+    <version>24.0-SNAPSHOT</version>\n   </parent>\n   <artifactId>guava</artifactId>\n   <packaging>bundle</packaging>\ndiff --git a/pom.xml b/pom.xml\nindex 0e3948510b78..f773212fcf02 100644\n--- a/pom.xml\n+++ b/pom.xml\n@@ -11,7 +11,7 @@\n   </parent>\n   <groupId>com.google.guava</groupId>\n   <artifactId>guava-parent</artifactId>\n-  <version>24.0-jre-SNAPSHOT</version>\n+  <version>24.0-SNAPSHOT</version>\n   <packaging>pom</packaging>\n   <name>Guava Maven Parent</name>\n   <url>https://github.com/google/guava</url>\ndiff --git a/util/set_version.sh b/util/set_version.sh\nindex 9346b88dd492..a154e815160f 100755\n--- a/util/set_version.sh\n+++ b/util/set_version.sh\n@@ -9,9 +9,9 @@ fi\n \n version=\"$1\"\n if [[ \"${version}\" =~ ^(.+)-SNAPSHOT$ ]]; then\n-  android_version=\"${BASH_REMATCH[1]}-android-SNAPSHOT\"\n+  android_version=\"${BASH_REMATCH[1]}-ga-SNAPSHOT\"\n else\n-  android_version=\"${version}-android\"\n+  android_version=\"${version}-ga\"\n fi\n \n mvn versions:set versions:commit -DnewVersion=\"${version}\"\n",
    "test_patch": "diff --git a/android/guava-testlib/pom.xml b/android/guava-testlib/pom.xml\nindex ab617513c435..05db192ff5e4 100644\n--- a/android/guava-testlib/pom.xml\n+++ b/android/guava-testlib/pom.xml\n@@ -5,7 +5,7 @@\n   <parent>\n     <groupId>com.google.guava</groupId>\n     <artifactId>guava-parent</artifactId>\n-    <version>24.0-android-SNAPSHOT</version>\n+    <version>24.0-ga-SNAPSHOT</version>\n   </parent>\n   <artifactId>guava-testlib</artifactId>\n   <name>Guava Testing Library</name>\ndiff --git a/android/guava-tests/pom.xml b/android/guava-tests/pom.xml\nindex e730e9195e9b..a8ec4c6043f3 100644\n--- a/android/guava-tests/pom.xml\n+++ b/android/guava-tests/pom.xml\n@@ -5,7 +5,7 @@\n   <parent>\n     <groupId>com.google.guava</groupId>\n     <artifactId>guava-parent</artifactId>\n-    <version>24.0-android-SNAPSHOT</version>\n+    <version>24.0-ga-SNAPSHOT</version>\n   </parent>\n   <artifactId>guava-tests</artifactId>\n   <name>Guava Unit Tests</name>\ndiff --git a/guava-testlib/pom.xml b/guava-testlib/pom.xml\nindex 190394461a52..2599d8ae62bf 100644\n--- a/guava-testlib/pom.xml\n+++ b/guava-testlib/pom.xml\n@@ -5,7 +5,7 @@\n   <parent>\n     <groupId>com.google.guava</groupId>\n     <artifactId>guava-parent</artifactId>\n-    <version>24.0-jre-SNAPSHOT</version>\n+    <version>24.0-SNAPSHOT</version>\n   </parent>\n   <artifactId>guava-testlib</artifactId>\n   <name>Guava Testing Library</name>\ndiff --git a/guava-tests/pom.xml b/guava-tests/pom.xml\nindex 2e1c097f64dc..d4116e4bad3a 100644\n--- a/guava-tests/pom.xml\n+++ b/guava-tests/pom.xml\n@@ -5,7 +5,7 @@\n   <parent>\n     <groupId>com.google.guava</groupId>\n     <artifactId>guava-parent</artifactId>\n-    <version>24.0-jre-SNAPSHOT</version>\n+    <version>24.0-SNAPSHOT</version>\n   </parent>\n   <artifactId>guava-tests</artifactId>\n   <name>Guava Unit Tests</name>\n",
    "problem_statement": "Guava for Android and Guava for the JRE need separate Maven namespaces\nGuava for Android is lacking classes that are provided in Guava for the JRE (notably around support for Java 8 in the immutable collections). The two are not interchangeable. \r\n\r\nMaven's dependency resolution looks at group and project IDs, and then attempts to find the most recent version. Because the only difference between the android and JRE versions of guava is the version number, this can result in Java 8 projects getting the Android version of Guava (and, presumably, vice versa).\r\n\r\nFor reference, at the time of writing [search.maven.org](http://search.maven.org/#search%7Cga%7C1%7Cguava) believes the most recent guava release is the one for Android.\r\n\r\n![guava-oops](https://user-images.githubusercontent.com/28229/29334655-14dc5d96-8200-11e7-8276-ebdd616ef661.png)\r\n\r\nThe correct thing to do is give the Android version a different project ID.",
    "hints_text": "Fix #2914 by switching -android version suffix to -ga; revert vanilla\u2026\nThis patch changes `-android` version suffix to `-ga` for Android / Java 7 flavored version of Guava, resolving #2914.\r\n\r\nThe resolution piggy-backs on documented Maven [`ComparableVersion`](http://maven.apache.org/ref/3.5.0/maven-artifact/apidocs/org/apache/maven/artifact/versioning/ComparableVersion.html) feature that equates `ga`-suffixed versions (e.g. `24.0-ga`) with non-suffixed ones (e.g. `24.0`) in the context of comparing / ordering / determining the latest version.\r\n\r\nNote: This also reverts [the patch](https://github.com/google/guava/commit/61d2a6faec8b27d021b9f37f7dfb6655ae060fad) by @cpovirk, restoring the original vanilla (Java 8+) Guava versioning scheme (e.g. from patched `24.0-jre` back to `24.0`).\r\n\r\nNote: [`README.md`](https://github.com/google/guava/blob/master/README.md#latest-release) text should be updated before releasing the next version to reflect the suffix change for the Android version.",
    "created_at": "",
    "version": "",
    "PASS_TO_PASS": [],
    "FAIL_TO_PASS": [
      "com.google.common.util.concurrent.testing.TestingExecutorsTest",
      "com.google.common.testing.ClassSanityTesterTest",
      "com.google.common.collect.testing.IteratorTesterTest",
      "com.google.common.collect.testing.MinimalIterableTest",
      "com.google.common.testing.FakeTickerTest",
      "com.google.common.testing.RelationshipTesterTest",
      "com.google.common.collect.testing.MinimalSetTest",
      "com.google.common.testing.TearDownStackTest",
      "com.google.common.testing.FreshValueGeneratorTest",
      "com.google.common.testing.TestLogHandlerTest",
      "com.google.common.testing.GcFinalizationTest",
      "com.google.common.collect.testing.MinimalCollectionTest",
      "com.google.common.testing.EquivalenceTesterTest",
      "com.google.common.testing.ArbitraryInstancesTest",
      "com.google.common.collect.testing.SafeTreeMapTest",
      "com.google.common.collect.testing.FeatureSpecificTestSuiteBuilderTest",
      "com.google.common.collect.testing.features.FeatureUtilTest",
      "com.google.common.testing.NullPointerTesterTest",
      "com.google.common.testing.anotherpackage.ForwardingWrapperTesterTest",
      "com.google.common.collect.testing.HelpersTest",
      "com.google.common.testing.SerializableTesterTest",
      "com.google.common.testing.EqualsTesterTest",
      "com.google.common.collect.testing.features.FeatureEnumTest",
      "com.google.common.testing.AbstractPackageSanityTestsTest",
      "com.google.common.collect.testing.SafeTreeSetTest"
    ],
    "bad_patches": []
  }
]