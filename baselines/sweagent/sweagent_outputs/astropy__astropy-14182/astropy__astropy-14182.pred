{"model_name_or_path": "sweagent_outputs", "instance_id": "astropy__astropy-14182", "model_patch": "\r\ndiff --git a/astropy/table/tests/test_table.py b/astropy/table/tests/test_table.py\r\nindex dda2609..2e2625c 100644\r\n--- a/astropy/table/tests/test_table.py\r\n+++ b/astropy/table/tests/test_table.py\r\n@@ -3223,6 +3223,13 @@ def test_read_write_tilde_path(path_type, home_is_tmpdir):\r\n     assert not os.path.exists(test_file)\r\n \r\n \r\n+def test_rst_header_rows():\r\n+    tbl = QTable({'wave': [350, 950]*u.nm, 'response': [0.7, 1.2]*u.count})\r\n+    output = StringIO()\r\n+    tbl.write(output, format=\"ascii.rst\", header_rows=[\"name\", \"unit\"])\r\n+    expected_output = \"\"\"===== ========\\n wave response\\n===== ========\\n350.0      0.7\\n950.0      1.2\\n===== ========\\n\"\"\"\r\n+    assert output.getvalue() == expected_output\r\n+\r\n def test_add_list_order():\r\n     t = Table()\r\n     names = list(map(str, range(20)))\r\ndiff --git a/test_rst_header.py b/test_rst_header.py\r\nnew file mode 100644\r\nindex 0000000..1884013\r\n--- /dev/null\r\n+++ b/test_rst_header.py\r\n@@ -0,0 +1,11 @@\r\n+\r\n+from astropy.table import QTable\r\n+import astropy.units as u\r\n+import sys\r\n+\r\n+tbl = QTable({'wave': [350, 950]*u.nm, 'response': [0.7, 1.2]*u.count})\r\n+\r\n+# This should work without errors\r\n+tbl.write(sys.stdout, format=\"ascii.rst\", header_rows=[\"name\", \"unit\"])\r\n+\r\n+print(\"Script completed successfully, no errors.\")\r\n\\ No newline at end of file\r\n"}