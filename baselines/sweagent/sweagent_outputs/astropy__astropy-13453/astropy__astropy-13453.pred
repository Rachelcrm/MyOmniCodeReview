{"model_name_or_path": "sweagent_outputs", "instance_id": "astropy__astropy-13453", "model_patch": "\r\ndiff --git a/astropy/io/ascii/tests/test_html.py b/astropy/io/ascii/tests/test_html.py\r\nindex 0515efa..f8150c9 100644\r\n--- a/astropy/io/ascii/tests/test_html.py\r\n+++ b/astropy/io/ascii/tests/test_html.py\r\n@@ -728,3 +728,38 @@ def test_read_html_unicode():\r\n                 '</table>']\r\n     dat = Table.read(table_in, format='ascii.html')\r\n     assert np.all(dat['col1'] == ['\u0394', '\u0394'])\r\n+@pytest.mark.skipif('not HAS_BS4')\r\n+def test_html_format_respected():\r\n+    \"\"\"\r\n+    Test that the formats argument is respected when writing tables to HTML.\r\n+    \"\"\"\r\n+    t = Table([(1.23875234858e-24, 3.2348748432e-15), (2, 4)], names=('a', 'b'))\r\n+    buffer_output = StringIO()\r\n+    t.write(buffer_output, format='html', formats={'a': lambda x: f\"{x:.2e}\"})\r\n+\r\n+    expected_output = '''<html>\r\n+ <head>\r\n+  <meta charset=\"utf-8\"/>\r\n+  <meta content=\"text/html;charset=UTF-8\" http-equiv=\"Content-type\"/>\r\n+ </head>\r\n+ <body>\r\n+  <table>\r\n+   <thead>\r\n+    <tr>\r\n+     <th>a</th>\r\n+     <th>b</th>\r\n+    </tr>\r\n+   </thead>\r\n+   <tr>\r\n+    <td>1.24e-24</td>\r\n+    <td>2</td>\r\n+   </tr>\r\n+   <tr>\r\n+    <td>3.23e-15</td>\r\n+    <td>4</td>\r\n+   </tr>\r\n+  </table>\r\n+ </body>\r\n+</html>'''\r\n+\r\n+    assert buffer_output.getvalue().strip() == expected_output.strip()\r\n\\ No newline at end of file\r\n"}